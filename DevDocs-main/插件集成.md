## Unity Editor
1. 设置 Edit > Project Settings -> Player -> Other Settings -> Minimum API Level 为 API level 24 。
## External Dependency Manager
1. 导入 [external-dependency-manager-1.2.186.unitypackage](https://raw.githubusercontent.com/googlesamples/unity-jar-resolver/v1.2.186/external-dependency-manager-1.2.186.unitypackage) 。
2. 修改 Assets/Plugins/Android/settingsTemplate.gradle 中的 `google` 和 `maven` 仓库地址为 `"http://192.168.0.128:8081/repository/android-group/"` 并添加 `allowInsecureProtocol = true` 。

参考模板：[settingsTemplate.gradle](插件集成/settingsTemplate.gradle) 。

**如果 Assets > External Dependency Manager > Android Resolver > Settings 中启用了 Auto-Resolution ，依赖发生变化时 settingsTemplate.gradle 会重新生成，需要再次修改。可使用脚本自动修改。**
## ConfigUtility
1. 导入 [configutility-v1.3.12-unity.unitypackage](http://code.zhongbosoft.com/company/configutility/-/wikis/uploads/8fdf1bd5b28494bd11fd4fb69694c04b/configutility-v1.3.12-unity.unitypackage) 。
2. 在 Assets/ConfigUtility/Platforms/Android/ConfigUtilityClient.cs 中，将 AdMob 与 MAX 广告 ID 分别填入 `admobbanner` 、`admobinter` 、`admobreward` 、`maxbanner` 、`maxinter` 和 `maxreward` 。
3. 设置 Edit > Project Settings -> Player -> Other Settings -> Allow downloads over HTTP 为 Always allowed 。

参考模板：[AdManager.cs](http://code.zhongbosoft.com/chrischen/UnityConfigUtility/-/blob/master/Assets/Scripts/ADManager.cs)
## Google Mobile Ads
**以下 unitypackage 中包含 External Dependency Manager ，如果项目中已经存在，需要将 External Dependency Manager 取消勾选。**
1. 导入 [GoogleMobileAds-v10.4.2.unitypackage](https://github.com/googleads/googleads-mobile-unity/releases/download/v10.4.2/GoogleMobileAds-v10.4.2.unitypackage) 。
2. 在 Assets > Google Mobile Ads > Settings 中填入 App ID ，取消 Enable Gradle build pre-processor 勾选。
## Max
**以下 unitypackage 中包含 External Dependency Manager ，如果项目中已经存在，需要将 External Dependency Manager 取消勾选。**

1. 导入 [AppLovin-MAX-Unity-Plugin-8.4.2-Android-13.4.0-iOS-13.4.0.unitypackage](https://github.com/AppLovin/AppLovin-MAX-Unity-Plugin/releases/download/release_8_4_2/AppLovin-MAX-Unity-Plugin-8.4.2-Android-13.4.0-iOS-13.4.0.unitypackage) 。
2. 在 AppLovin > Integration Manager -> Mediated Networks 中安装需要聚合的广告平台，在 SDK Settings 中设置 AppLovin SDK Key ， 勾选 Enable Max Ad Review。

Max 聚合广告平台列表：
- BidMachine
- DT Exchange
- Facebook
- Google Ad Manager（android_24.5.0.0_ios_12.9.0.0）
- Google AdMob（android_24.5.0.0_ios_12.9.0.0）
- InMobi
- ironSource
- Liftoff Monetize
- Line
- Mintegral
- Moloco
- Pangle
- PubMatic
- Unity Ads
- VK Ad Network
- Yandex

推荐导入经验证的平台版本 -> [MaxMediation.unitypackage](http://code.zhongbosoft.com/unity-dev/DevDocs/-/raw/main/%E6%8F%92%E4%BB%B6%E9%9B%86%E6%88%90/MaxMediation.unitypackage?inline=false)
## Firebase
**以下 unitypackage 中包含 External Dependency Manager ，如果项目中已经存在，需要将 External Dependency Manager 取消勾选。**

1. 导入 [FirebaseAnalytics_12.10.1.unitypackage](https://dl.google.com/firebase/sdk/unity/dotnet4/FirebaseAnalytics_12.10.1.unitypackage?hl=zh-cn) 。
2. 导入 [FirebaseRemoteConfig_12.10.1.unitypackage](https://dl.google.com/firebase/sdk/unity/dotnet4/FirebaseRemoteConfig_12.10.1.unitypackage?hl=zh-cn) 。
3. 将 google-services.json 放在 Assets 目录下。

初始化时调用 `FirebaseApp.CheckAndFixDependenciesAsync` 异步等待，返回结果为 `Available` 后才能开始上报。可以在初始化未完成前，使用队列暂时储存需要上报的事件。
```csharp
private async UniTask InitializeFirebaseAsync()  
{  
    var status = await FirebaseApp.CheckAndFixDependenciesAsync();  
  
    switch (status)  
    {  
        case DependencyStatus.Available:  
            IsAvailable = true;  
            Debug.Log($"Firebase status: {status}");  
            break;  
        default:  
            Debug.LogError($"Firebase status: {status}");  
            break;  
    }  
}

private void LogFirebaseEvent(string name, string parameterName, string parameterValue) 
{ 
    if (!IsAvailable)
        return;
        
    FirebaseAnalytics.LogEvent(name, parameterName, parameterValue);
}
```

## Adjust
1. 导入 [Adjust_v5.4.3.unitypackage](https://github.com/adjust/unity_sdk/releases/download/v5.4.3/Adjust_v5.4.3.unitypackage) 。
2. 在 Assets/Adjust/Native/Android/AdjustAndroidManifest.xml 中，将 `android:debuggable` 设置为 `false` 。
```csharp
private void InitializeAdjust()  
{  
	var adjustConfig = new AdjustConfig(AdjustAppToken, AdjustEnvironment.Production)  
	{  
	    LogLevel = AdjustLogLevel.Verbose,  
	};  
  
	Adjust.InitSdk(adjustConfig);
}

private void LogAdjustEvent(string eventName, string eventId, double? amount = null, string? currency = null, string? transactionId = null)  
{  
	var adjustEvent = new AdjustEvent(eventId);    
	  
	if (amount.HasValue && !string.IsNullOrEmpty(currency))    
	    adjustEvent.SetRevenue(amount.Value, currency);    
	  
	if (transactionId != null)  
	    adjustEvent.TransactionId = transactionId;    
	  
	Adjust.TrackEvent(adjustEvent);  
}
```
## In App Purchasing
1. 安装 [com.unity.purchasing@4.13.1](com.unity3d.kharma:upmpackage/com.unity.purchasing@4.13.1) 。

参考模板：[StoreListener.cs](插件集成/StoreListener.cs)